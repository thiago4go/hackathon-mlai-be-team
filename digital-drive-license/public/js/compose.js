/*! For license information please see compose.js.LICENSE.txt */
(self.webpackChunkpixelfed=self.webpackChunkpixelfed||[]).push([[5666],{7114:(t,e,i)=>{"use strict";i.r(e);var s=i(18999),a={};for(const t in s)"default"!==t&&(a[t]=()=>s[t]);i.d(e,a)},18999:(t,e,i)=>{"use strict";i.r(e),i.d(e,{render:()=>s,staticRenderFns:()=>a});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"compose-modal-component"},[e("input",{staticClass:"w-100 h-100 d-none file-input",attrs:{type:"file",id:"pf-dz",name:"media",multiple:"",accept:t.config.uploader.media_types},on:{input:t.onInputFile}}),t._v(" "),e("canvas",{staticClass:"d-none",attrs:{id:"pr_canvas"}}),t._v(" "),e("img",{staticClass:"d-none",attrs:{id:"pr_img"}}),t._v(" "),e("div",{staticClass:"timeline"},[t.uploading?e("div",[e("div",{staticClass:"card status-card card-md-rounded-0 w-100 h-100 bg-light py-3",staticStyle:{"border-bottom":"1px solid #f1f1f1"}},[e("div",{staticClass:"p-5 mt-2"},[e("b-progress",{attrs:{value:t.uploadProgress,max:100,striped:"",animated:!0}}),t._v(" "),e("p",{staticClass:"text-center mb-0 font-weight-bold"},[t._v("Uploading ... ("+t._s(t.uploadProgress)+"%)")])],1)])]):"cameraRoll"==t.page?e("div",[e("div",{staticClass:"card status-card card-md-rounded-0",staticStyle:{display:"flex"}},[t._m(0),t._v(" "),e("div",{staticClass:"h-100 card-body p-0 border-top",staticStyle:{width:"100%","min-height":"400px"}},[t.cameraRollMedia.length>0?e("div",{staticClass:"row p-0 m-0"},t._l(t.cameraRollMedia,function(t,i){return e("div",{class:[0==i?"col-12 p-0":"col-3 p-0"]},[e("div",{staticClass:"card info-overlay p-0 rounded-0 shadow-none border"},[e("div",{staticClass:"square"},[e("img",{staticClass:"square-content",attrs:{src:t.preview_url}})])])])}),0):e("div",{staticClass:"w-100 h-100 d-flex justify-content-center align-items-center"},[e("span",{staticClass:"w-100 h-100"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("Upload")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.fetchCameraRollDrafts()}}},[t._v("Load Camera Roll")])])])])])]):"poll"==t.page?e("div",[e("div",{staticClass:"card status-card card-md-rounded-0",staticStyle:{display:"flex"}},[e("div",{staticClass:"card-header d-inline-flex align-items-center justify-content-between bg-white"},[t._m(1),t._v(" "),e("span",{staticClass:"font-weight-bold"},[t._v("\n                        New Poll\n                    ")]),t._v(" "),t.postingPoll?e("span",[t._m(2)]):!t.postingPoll&&t.pollOptions.length>1&&t.composeText.length?e("button",{staticClass:"btn btn-primary btn-sm font-weight-bold",on:{click:t.postNewPoll}},[e("span",[t._v("Create Poll")])]):e("span",{staticClass:"font-weight-bold text-lighter"},[t._v("\n                        Create Poll\n                    ")])]),t._v(" "),e("div",{staticClass:"h-100 card-body p-0 border-top",staticStyle:{width:"100%","min-height":"400px"}},[e("div",{staticClass:"border-bottom mt-2"},[e("div",{staticClass:"media px-3"},[e("img",{staticClass:"rounded-circle",attrs:{src:t.profile.avatar,width:"42px",height:"42px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold text-muted small d-none"},[t._v("Caption")]),t._v(" "),e("vue-tribute",{attrs:{options:t.tributeSettings}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.composeText,expression:"composeText"}],staticClass:"form-control border-0 rounded-0 no-focus",attrs:{rows:"3",placeholder:"Write a poll question..."},domProps:{value:t.composeText},on:{keyup:function(e){t.composeTextLength=t.composeText.length},input:function(e){e.target.composing||(t.composeText=e.target.value)}}})]),t._v(" "),e("p",{staticClass:"help-text small text-right text-muted mb-0"},[t._v(t._s(t.composeTextLength)+"/"+t._s(t.config.uploader.max_caption_length))])],1)])])]),t._v(" "),e("div",{staticClass:"p-3"},[e("p",{staticClass:"font-weight-bold text-muted small"},[t._v("\n                            Poll Options\n                        ")]),t._v(" "),t.pollOptions.length<4?e("div",{staticClass:"form-group mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pollOptionModel,expression:"pollOptionModel"}],staticClass:"form-control rounded-pill",attrs:{type:"text",placeholder:"Add a poll option, press enter to save"},domProps:{value:t.pollOptionModel},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.savePollOption.apply(null,arguments)},input:function(e){e.target.composing||(t.pollOptionModel=e.target.value)}}})]):t._e(),t._v(" "),t._l(t.pollOptions,function(i,s){return e("div",{staticClass:"form-group mb-4 d-flex align-items-center",staticStyle:{"max-width":"400px",position:"relative"}},[e("span",{staticClass:"font-weight-bold mr-2",staticStyle:{position:"absolute",left:"10px"}},[t._v(t._s(s+1)+".")]),t._v(" "),t.pollOptions[s].length<50?e("input",{directives:[{name:"model",rawName:"v-model",value:t.pollOptions[s],expression:"pollOptions[index]"}],staticClass:"form-control rounded-pill",staticStyle:{"padding-left":"30px","padding-right":"90px"},attrs:{type:"text",placeholder:"Add a poll option, press enter to save"},domProps:{value:t.pollOptions[s]},on:{input:function(e){e.target.composing||t.$set(t.pollOptions,s,e.target.value)}}}):e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pollOptions[s],expression:"pollOptions[index]"}],staticClass:"form-control",staticStyle:{"padding-left":"30px","padding-right":"90px"},attrs:{placeholder:"Add a poll option, press enter to save",rows:"3"},domProps:{value:t.pollOptions[s]},on:{input:function(e){e.target.composing||t.$set(t.pollOptions,s,e.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-danger btn-sm rounded-pill font-weight-bold",staticStyle:{position:"absolute",right:"5px"},on:{click:function(e){return t.deletePollOption(s)}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" Delete\n                            ")])])}),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"d-flex justify-content-between"},[e("div",[e("p",{staticClass:"font-weight-bold text-muted small"},[t._v("\n                                    Poll Expiry\n                                ")]),t._v(" "),e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pollExpiry,expression:"pollExpiry"}],staticClass:"form-control rounded-pill",staticStyle:{width:"200px"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pollExpiry=e.target.multiple?i:i[0]}}},[e("option",{attrs:{value:"60"}},[t._v("1 hour")]),t._v(" "),e("option",{attrs:{value:"360"}},[t._v("6 hours")]),t._v(" "),e("option",{attrs:{value:"1440",selected:""}},[t._v("24 hours")]),t._v(" "),e("option",{attrs:{value:"10080"}},[t._v("7 days")])])])]),t._v(" "),e("div",[e("p",{staticClass:"font-weight-bold text-muted small"},[t._v("\n                                    Poll Visibility\n                                ")]),t._v(" "),e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.visibility,expression:"visibility"}],staticClass:"form-control rounded-pill",staticStyle:{"max-width":"200px"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.visibility=e.target.multiple?i:i[0]}}},[e("option",{attrs:{value:"public"}},[t._v("Public")]),t._v(" "),e("option",{attrs:{value:"private"}},[t._v("Followers Only")])])])])])],2)])])]):e("div",[e("div",{staticClass:"card status-card card-md-rounded-0 w-100 h-100",staticStyle:{display:"flex"}},[e("div",{staticClass:"card-header d-inline-flex align-items-center justify-content-between bg-white"},[e("div",[1==t.page?e("a",{staticClass:"font-weight-bold text-decoration-none text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[e("i",{staticClass:"fas fa-times fa-lg"}),t._v(" "),e("span",{staticClass:"font-weight-bold mb-0"},[t._v(t._s(t.pageTitle))])]):2==t.page?e("span",[t.config.uploader.album_limit>t.media.length?e("button",{staticClass:"btn btn-outline-primary btn-sm font-weight-bold",attrs:{id:"cm-add-media-btn"},on:{click:function(e){return e.preventDefault(),t.addMedia.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-plus"})]):e("button",{staticClass:"btn btn-outline-secondary btn-sm font-weight-bold",attrs:{disabled:""}},[e("i",{staticClass:"fas fa-plus"})]),t._v(" "),e("b-tooltip",{attrs:{target:"cm-add-media-btn",triggers:"hover"}},[t._v("\n                                Upload another photo or video\n                            ")])],1):3==t.page?e("span",[e("a",{staticClass:"text-lighter text-decoration-none mr-3 d-flex align-items-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goBack()}}},[e("i",{staticClass:"fas fa-long-arrow-alt-left fa-lg mr-2"}),t._v(" "),e("span",{staticClass:"btn btn-outline-secondary btn-sm px-2 py-0 disabled",attrs:{disabled:""}},[t._v(t._s(t.media.length))])]),t._v(" "),e("span",{staticClass:"font-weight-bold mb-0"},[t._v(t._s(t.pageTitle))])]):e("span",[e("a",{staticClass:"text-lighter text-decoration-none mr-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goBack()}}},[e("i",{staticClass:"fas fa-long-arrow-alt-left fa-lg"})])]),t._v(" "),e("span",{staticClass:"font-weight-bold mb-0"},[t._v(t._s(t.pageTitle))])]),t._v(" "),2==t.page?e("div",[1==t.media.length?e("a",{staticClass:"text-center text-dark",attrs:{href:"#",title:"Crop & Resize",id:"cm-crop-btn"},on:{click:function(e){return e.preventDefault(),t.showCropPhotoCard.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-crop-alt fa-lg"})]):t._e(),t._v(" "),e("b-tooltip",{attrs:{target:"cm-crop-btn",triggers:"hover"}},[t._v("\n                            Crop & Resize\n                        ")])],1):t._e(),t._v(" "),e("div",[t.pageLoading?e("span",[t._m(3)]):e("span",[!t.pageLoading&&t.page>1&&t.page<=2||1==t.page&&0!=t.ids.length||"cropPhoto"==t.page?e("a",{staticClass:"font-weight-bold text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextPage.apply(null,arguments)}}},[t._v("Next")]):t._e(),t._v(" "),t.pageLoading||3!=t.page?t._e():[t.isPosting?e("b-spinner",{attrs:{small:""}}):e("a",{staticClass:"font-weight-bold text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.compose()}}},[t._v("Post")])],t._v(" "),t.pageLoading||"addText"!=t.page?t._e():e("a",{staticClass:"font-weight-bold text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.composeTextPost()}}},[t._v("Post")]),t._v(" "),t.pageLoading||"video-2"!=t.page?t._e():e("a",{staticClass:"font-weight-bold text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.compose()}}},[t._v("Post")])],2)])]),t._v(" "),e("div",{staticClass:"card-body p-0 border-top"},["licensePicker"==t.page?e("div",{staticClass:"w-100 h-100",staticStyle:{"min-height":"280px"}},[e("div",{staticClass:"list-group list-group-flush"},t._l(t.availableLicenses,function(i,s){return e("div",{staticClass:"list-group-item cursor-pointer",class:{"text-primary":t.licenseId===i.id,"font-weight-bold":t.licenseId===i.id},on:{click:function(e){return t.toggleLicense(i)}}},[t._v("\n                                "+t._s(i.name)+"\n                            ")])}),0)]):"textOptions"==t.page?e("div",{staticClass:"w-100 h-100",staticStyle:{"min-height":"280px"}}):"addText"==t.page?e("div",{staticClass:"w-100 h-100",staticStyle:{"min-height":"280px"}},[e("div",{staticClass:"mt-2"},[e("div",{staticClass:"media px-3"},[e("div",{staticClass:"media-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold text-muted small d-none"},[t._v("Body")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.composeText,expression:"composeText"}],staticClass:"form-control border-0 rounded-0 no-focus",staticStyle:{"font-size":"18px",resize:"none"},attrs:{rows:"7",placeholder:"What's happening?"},domProps:{value:t.composeText},on:{keyup:function(e){t.composeTextLength=t.composeText.length},input:function(e){e.target.composing||(t.composeText=e.target.value)}}}),t._v(" "),e("div",{staticClass:"border-bottom"}),t._v(" "),e("p",{staticClass:"help-text small text-right text-muted mb-0 font-weight-bold"},[t._v(t._s(t.composeTextLength)+"/"+t._s(t.config.uploader.max_caption_length))]),t._v(" "),e("p",{staticClass:"mb-0 mt-2"},[e("a",{staticClass:"btn btn-primary rounded-pill mr-2",staticStyle:{height:"37px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showTextOptions()}}},[e("i",{staticClass:"fas fa-palette px-3 text-white"})]),t._v(" "),e("a",{staticClass:"btn rounded-pill mx-3 d-inline-flex align-items-center",class:[t.nsfw?"btn-danger":"btn-outline-lighter"],staticStyle:{height:"37px"},attrs:{href:"#",title:"Mark as sensitive/not safe for work"},on:{click:function(e){e.preventDefault(),t.nsfw=!t.nsfw}}},[e("i",{staticClass:"far fa-flag px-3"}),t._v(" "),e("span",{staticClass:"text-muted small font-weight-bold"})]),t._v(" "),e("a",{staticClass:"btn btn-outline-lighter rounded-pill d-inline-flex align-items-center",staticStyle:{height:"37px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showVisibilityCard()}}},[e("i",{staticClass:"fas fa-eye mr-2"}),t._v(" "),e("span",{staticClass:"text-muted small font-weight-bold"},[t._v(t._s(t.visibilityTag))])])])])])])])]):1==t.page?e("div",{staticClass:"w-100 h-100 d-flex justify-content-center align-items-center",staticStyle:{"min-height":"400px"}},[e("div",{staticClass:"text-center"},[0==t.media.length?e("div",{staticClass:"card my-md-3 shadow-none border compose-action text-decoration-none text-dark"},[e("div",{staticClass:"card-body py-2",on:{click:function(e){return e.preventDefault(),t.addMedia.apply(null,arguments)}}},[e("div",{staticClass:"media"},[t._m(4),t._v(" "),e("div",{staticClass:"media-body text-left"},[t._m(5),t._v(" "),e("p",{staticClass:"mb-0 text-muted"},[t._v("Share up to "+t._s(t.config.uploader.album_limit)+" photos or videos")]),t._v(" "),e("p",{staticClass:"mb-0 text-muted small"},[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.config.uploader.media_types.split(",").map(function(t){return t.split("/")[1]}).join(", ")))]),t._v(" allowed up to "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.filesize(t.config.uploader.max_photo_size)))])])])])])]):t._e(),t._v(" "),t._e(),t._v(" "),1==t.config.features.stories?e("a",{staticClass:"card my-md-3 shadow-none border compose-action text-decoration-none text-dark",attrs:{href:"/i/stories/new"}},[t._m(7)]):t._e(),t._v(" "),t._e(),t._v(" "),t._m(9),t._v(" "),t._m(10)])]):"cropPhoto"==t.page?e("div",{staticClass:"w-100 h-100"},[t.media.length>0?e("div",[e("vue-cropper",{ref:"cropper",attrs:{relativeZoom:t.cropper.zoom,aspectRatio:t.cropper.aspectRatio,viewMode:t.cropper.viewMode,zoomable:t.cropper.zoomable,rotatable:!0,src:t.media[t.carouselCursor].url}})],1):t._e()]):2==t.page?e("div",{staticClass:"w-100 h-100"},[1==t.media.length?e("div",["image"===t.media[0].type?[e("media-editor-preview",{staticClass:"media-editor",attrs:{editor:t.editor,sourceIndex:0}}),t._v(" "),e("hr"),t._v(" "),e("media-editor-filter-menu",{staticClass:"media-editor",attrs:{editor:t.editor,sourceIndex:0}})]:e("img",{staticClass:"d-block img-fluid w-100",attrs:{src:"/storage/no-preview.png",alt:t.media[t.carouselCursor].description,title:t.media[t.carouselCursor].description}})],2):t.media.length>1?e("div",{staticClass:"d-flex-inline px-2 pt-2"},[e("ul",{staticClass:"nav media-drawer-filters text-center pb-3"},[e("li",{staticClass:"nav-item mx-md-4"},[t._v(" ")]),t._v(" "),t._l(t.media,function(i,s){return e("li",{key:s+(t.ids[s]||i.url||""),staticClass:"nav-item mx-md-4"},[e("div",{staticClass:"nav-link",staticStyle:{display:"block",width:"300px",height:"300px"},on:{click:function(e){t.carouselCursor=s}}},[e("div",{class:[i.filter_class?i.filter_class:""],staticStyle:{width:"100%",height:"100%",display:"block"}},["image"===i.type?e("media-editor-preview",{staticClass:"media-editor",class:"rounded "+[s==t.carouselCursor?" border border-primary shadow":""],staticStyle:{width:"100%",height:"100%"},attrs:{editor:t.editor,sourceIndex:s}}):e("img",{staticClass:"d-block img-fluid w-100",attrs:{src:"/storage/no-preview.png",alt:t.media[t.carouselCursor].description,title:t.media[t.carouselCursor].description}})],1)]),t._v(" "),s==t.carouselCursor?e("div",{staticClass:"text-center mb-0 small text-lighter font-weight-bold pt-2"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.mediaReorder("prev")}}},[e("i",{staticClass:"far fa-chevron-circle-left"})]),t._v(" "),e("span",{staticClass:"cursor-pointer",on:{click:function(e){return e.preventDefault(),t.showCropPhotoCard.apply(null,arguments)}}},[t._v("Crop")]),t._v(" "),e("span",{staticClass:"cursor-pointer px-3",on:{click:function(e){return e.preventDefault(),t.showEditMediaCard()}}},[t._v("Edit")]),t._v(" "),e("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.deleteMedia()}}},[t._v("Delete")]),t._v(" "),e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.mediaReorder("next")}}},[e("i",{staticClass:"far fa-chevron-circle-right"})])]):t._e()])}),t._v(" "),e("li",{staticClass:"nav-item mx-md-4"},[t._v(" ")])],2),t._v(" "),e("hr"),t._v(" "),"image"==t.media[t.carouselCursor].type?e("div",{staticClass:"align-items-center px-2 pt-2"},[e("media-editor-filter-menu",{staticClass:"media-editor",attrs:{editor:t.editor,sourceIndex:t.carouselCursor}})],1):t._e()]):e("div",[e("p",{staticClass:"mb-0 p-5 text-center font-weight-bold"},[t._v("An error occured, please refresh the page.")])])]):3==t.page?e("div",{staticClass:"w-100 h-100"},[e("div",{staticClass:"border-bottom mt-2"},[e("div",{staticClass:"media px-3"},[e("img",{staticClass:"mr-2",attrs:{src:t.media[0].preview_url,width:"42px",height:"42px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold text-muted small d-none"},[t._v("Caption")]),t._v(" "),e("vue-tribute",{attrs:{options:t.tributeSettings}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.composeText,expression:"composeText"}],staticClass:"form-control border-0 rounded-0 no-focus",attrs:{rows:"3",placeholder:"Write a caption..."},domProps:{value:t.composeText},on:{keyup:function(e){t.composeTextLength=t.composeText.length},input:function(e){e.target.composing||(t.composeText=e.target.value)}}})]),t._v(" "),e("p",{staticClass:"help-text small text-right text-muted mb-0"},[t._v(t._s(t.composeTextLength)+"/"+t._s(t.config.uploader.max_caption_length))])],1)])])]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2 cursor-pointer d-flex justify-content-between",on:{click:function(e){return t.showMediaDescriptionsCard()}}},[e("span",[t._v("Alt Text")]),t._v(" "),e("span",[t.media&&t.media.filter(function(t){return t.alt}).length==t.media.length?e("i",{staticClass:"fas fa-check-circle fa-lg text-success"}):e("i",{staticClass:"fas fa-chevron-right fa-lg text-lighter"})])])]),t._v(" "),e("div",{staticClass:"border-bottom px-4 mb-0 py-2"},[e("div",{staticClass:"d-flex justify-content-between"},[t._m(11),t._v(" "),e("div",[e("div",{staticClass:"custom-control custom-switch",staticStyle:{"z-index":"9999"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nsfw,expression:"nsfw"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"asnsfw"},domProps:{checked:Array.isArray(t.nsfw)?t._i(t.nsfw,null)>-1:t.nsfw},on:{change:function(e){var i=t.nsfw,s=e.target,a=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.nsfw=i.concat([null])):o>-1&&(t.nsfw=i.slice(0,o).concat(i.slice(o+1)))}else t.nsfw=a}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"asnsfw"}})])])]),t._v(" "),t.nsfw?e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.spoilerText,expression:"spoilerText"}],staticClass:"form-control mt-3",attrs:{placeholder:"Add an optional content warning or spoiler text",maxlength:"140"},domProps:{value:t.spoilerText},on:{input:function(e){e.target.composing||(t.spoilerText=e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text small text-right text-muted mb-0"},[t._v(t._s(t.spoilerTextLength)+"/140")])]):t._e()]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2 cursor-pointer",on:{click:function(e){return t.showTagCard()}}},[t._v("Tag people")])]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2 cursor-pointer",on:{click:function(e){return t.showCollectionCard()}}},[t._m(12),t._v(" "),e("span",{staticClass:"float-right"},[t.collectionsSelected.length?e("span",{staticClass:"btn btn-outline-secondary btn-sm small mr-3 mt-n1 disabled",staticStyle:{"font-size":"10px",padding:"3px 5px","text-transform":"uppercase"},attrs:{href:"#",disabled:""}},[t._v("\n                                        "+t._s(t.collectionsSelected.length)+"\n                                    ")]):t._e(),t._v(" "),t._m(13)])])]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2 cursor-pointer",on:{click:function(e){return t.showLicenseCard()}}},[e("span",[t._v("Add license")]),t._v(" "),e("span",{staticClass:"float-right"},[t.licenseTitle?e("a",{staticClass:"btn btn-outline-secondary btn-sm small mr-3 mt-n1 disabled",staticStyle:{"font-size":"10px",padding:"3px","text-transform":"uppercase"},attrs:{href:"#",disabled:""},on:{click:function(e){return e.preventDefault(),t.showLicenseCard()}}},[t._v(t._s(t.licenseTitle))]):t._e(),t._v(" "),e("a",{staticClass:"text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showLicenseCard()}}},[e("i",{staticClass:"fas fa-chevron-right fa-lg text-lighter"})])])])]),t._v(" "),e("div",{staticClass:"border-bottom"},[t.place?e("p",{staticClass:"px-4 mb-0 py-2"},[e("span",{staticClass:"text-lighter"},[t._v("Location:")]),t._v(" "+t._s(t.place.name)+", "+t._s(t.place.country)+"\n                                "),e("span",{staticClass:"float-right"},[e("a",{staticClass:"btn btn-outline-secondary btn-sm small mr-2",staticStyle:{"font-size":"10px",padding:"3px","text-transform":"uppercase"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showLocationCard()}}},[t._v("Edit")]),t._v(" "),e("a",{staticClass:"btn btn-outline-secondary btn-sm small",staticStyle:{"font-size":"10px",padding:"3px","text-transform":"uppercase"},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.place=!1}}},[t._v("Remove")])])]):e("p",{staticClass:"px-4 mb-0 py-2 cursor-pointer",on:{click:function(e){return t.showLocationCard()}}},[t._v("Add location")])]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2"},[e("span",[t._v("Audience")]),t._v(" "),e("span",{staticClass:"float-right"},[e("a",{staticClass:"btn btn-outline-secondary btn-sm small mr-3 mt-n1 disabled",staticStyle:{"font-size":"10px",padding:"3px","text-transform":"uppercase"},attrs:{href:"#",disabled:""},on:{click:function(e){return e.preventDefault(),t.showVisibilityCard()}}},[t._v(t._s(t.visibilityTag))]),t._v(" "),e("a",{staticClass:"text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showVisibilityCard()}}},[e("i",{staticClass:"fas fa-chevron-right fa-lg text-lighter"})])])])]),t._v(" "),e("div",{staticStyle:{"min-height":"200px"}},[e("p",{staticClass:"px-4 mb-0 py-2 small font-weight-bold text-muted cursor-pointer",on:{click:function(e){return t.showAdvancedSettingsCard()}}},[t._v("Advanced settings")])])]):"tagPeople"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[e("autocomplete",{directives:[{name:"show",rawName:"v-show",value:t.taggedUsernames.length<10,expression:"taggedUsernames.length < 10"}],ref:"autocomplete",attrs:{search:t.tagSearch,placeholder:"@pixelfed","aria-label":"Search usernames","get-result-value":t.getTagResultValue},on:{submit:t.onTagSubmitLocation}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.taggedUsernames.length<10,expression:"taggedUsernames.length < 10"}],staticClass:"font-weight-bold text-muted small"},[t._v("You can tag "+t._s(10-t.taggedUsernames.length)+" more "+t._s(9==t.taggedUsernames.length?"person":"people")+"!")]),t._v(" "),e("p",{staticClass:"font-weight-bold text-center mt-3"},[t._v("Tagged People")]),t._v(" "),e("div",{staticClass:"list-group"},[t._l(t.taggedUsernames,function(i,s){return e("div",{staticClass:"list-group-item d-flex justify-content-between"},[e("div",{staticClass:"media"},[e("img",{staticClass:"mr-2 rounded-circle border",attrs:{src:i.avatar,width:"24px",height:"24px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(i.name))])])]),t._v(" "),e("div",{staticClass:"custom-control custom-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.privacy,expression:"tag.privacy"}],staticClass:"custom-control-input disabled",attrs:{type:"checkbox",id:"cci-tagged-privacy-switch"+s,disabled:""},domProps:{checked:Array.isArray(i.privacy)?t._i(i.privacy,null)>-1:i.privacy},on:{change:function(e){var s=i.privacy,a=e.target,o=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&t.$set(i,"privacy",s.concat([null])):n>-1&&t.$set(i,"privacy",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(i,"privacy",o)}}}),t._v(" "),e("label",{staticClass:"custom-control-label font-weight-bold text-lighter",attrs:{for:"cci-tagged-privacy-switch"+s}},[t._v(t._s(i.privacy?"Public":"Private"))]),t._v(" "),e("a",{staticClass:"ml-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.untagUsername(s)}}},[e("i",{staticClass:"fas fa-times text-muted"})])])])}),t._v(" "),0==t.taggedUsernames.length?e("div",{staticClass:"list-group-item p-3"},[e("p",{staticClass:"text-center mb-0 font-weight-bold text-lighter"},[t._v("Search usernames to tag.")])]):t._e()],2),t._v(" "),e("p",{staticClass:"font-weight-bold text-center small text-muted pt-3 mb-0"},[t._v("When you tag someone, they are sent a notification."),e("br"),t._v("For more information on tagging, "),e("a",{staticClass:"text-primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showTagHelpCard()}}},[t._v("click here")]),t._v(".")])],1):"tagPeopleHelp"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[e("p",{staticClass:"mb-0 text-center py-3 px-2 lead"},[t._v("Tagging someone is like mentioning them, with the option to make it private between you.")]),t._v(" "),e("p",{staticClass:"mb-3 py-3 px-2 font-weight-lighter"},[t._v("\n                            You can choose to tag someone in public or private mode. Public mode will allow others to see who you tagged in the post and private mode tagged users will not be shown to others.\n                        ")])]):"addLocation"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[e("p",{staticClass:"mb-0"},[t._v("Add Location")]),t._v(" "),e("autocomplete",{attrs:{search:t.locationSearch,placeholder:"Search locations ...","aria-label":"Search locations ...","get-result-value":t.getResultValue},on:{submit:t.onSubmitLocation}})],1):"advancedSettings"==t.page?e("div",{staticClass:"w-100 h-100"},[e("div",{staticClass:"list-group list-group-flush"},[e("div",{staticClass:"list-group-item d-flex justify-content-between"},[t._m(14),t._v(" "),e("div",[e("div",{staticClass:"custom-control custom-switch",staticStyle:{"z-index":"9999"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.commentsDisabled,expression:"commentsDisabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"asdisablecomments"},domProps:{checked:Array.isArray(t.commentsDisabled)?t._i(t.commentsDisabled,null)>-1:t.commentsDisabled},on:{change:function(e){var i=t.commentsDisabled,s=e.target,a=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.commentsDisabled=i.concat([null])):o>-1&&(t.commentsDisabled=i.slice(0,o).concat(i.slice(o+1)))}else t.commentsDisabled=a}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"asdisablecomments"}})])])]),t._v(" "),e("a",{staticClass:"list-group-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showMediaDescriptionsCard()}}},[t._m(15)])])]):"visibility"==t.page?e("div",{staticClass:"w-100 h-100"},[e("div",{staticClass:"list-group list-group-flush"},[t.profile.locked?t._e():e("div",{staticClass:"list-group-item lead cursor-pointer",class:{"text-primary":"public"==t.visibility},on:{click:function(e){return t.toggleVisibility("public")}}},[t._v("\n                                Public\n                            ")]),t._v(" "),t.profile.locked?t._e():e("div",{staticClass:"list-group-item lead cursor-pointer",class:{"text-primary":"unlisted"==t.visibility},on:{click:function(e){return t.toggleVisibility("unlisted")}}},[t._v("\n                                Unlisted\n                            ")]),t._v(" "),e("div",{staticClass:"list-group-item lead cursor-pointer",class:{"text-primary":"private"==t.visibility},on:{click:function(e){return t.toggleVisibility("private")}}},[t._v("\n                                Followers Only\n                            ")])])]):"altText"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[t._l(t.media,function(i,s){return e("div",[e("div",{staticClass:"media"},[e("img",{staticClass:"mr-3",attrs:{src:i.preview_url,width:"50px",height:"50px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.alt,expression:"m.alt"}],staticClass:"form-control",attrs:{placeholder:"Add a media description here...",maxlength:t.maxAltTextLength,rows:"4"},domProps:{value:i.alt},on:{input:function(e){e.target.composing||t.$set(i,"alt",e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text small text-right text-muted mb-0"},[t._v(t._s(i.alt?i.alt.length:0)+"/"+t._s(t.maxAltTextLength))])])]),t._v(" "),e("hr")])}),t._v(" "),e("p",{staticClass:"d-flex justify-content-between mb-0"},[e("button",{staticClass:"btn btn-link text-muted font-weight-bold text-decoration-none",attrs:{type:"button"},on:{click:function(e){return t.goBack()}}},[t._v("Cancel")]),t._v(" "),e("button",{staticClass:"btn btn-primary font-weight-bold",attrs:{type:"button"},on:{click:function(e){return t.goBack()}}},[t._v("Save")])])],2):"addToCollection"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[t.collectionsLoaded&&t.collections.length?e("div",{staticClass:"list-group mb-3 collections-list-group"},[t._l(t.collections,function(i,s){return e("div",{staticClass:"list-group-item cursor-pointer compose-action border",class:{active:t.collectionsSelected.includes(s)},on:{click:function(e){return t.toggleCollectionItem(s)}}},[e("div",{staticClass:"media"},[e("img",{staticClass:"mr-3",attrs:{src:i.thumb,alt:"",width:"50px",height:"50px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("h5",{staticClass:"mt-0"},[t._v(t._s(i.title))]),t._v(" "),e("p",{staticClass:"mb-0 text-muted small"},[e("span",[t._v(t._s(i.post_count)+" Posts")]),t._v(" "),e("span",[t._v("·")]),t._v(" "),"draft"===i.visibility?e("span",{staticClass:"primary"},[e("i",{staticClass:"far fa-lock fa-sm"}),t._v(" "+t._s(t.$t("profile.draft")))]):e("span",[t._v("Created "+t._s(t.timeago(i.published_at))+" ago")])])])])])}),t._v(" "),t.collectionsCanLoadMore?e("button",{staticClass:"btn btn-light btn-block font-weight-bold mt-3",on:{click:t.loadMoreCollections}},[t._v("\n                                Load more\n                            ")]):t._e()],2):t._e(),t._v(" "),e("p",{staticClass:"d-flex justify-content-between mb-0"},[e("button",{staticClass:"btn btn-link text-muted font-weight-bold text-decoration-none",attrs:{type:"button"},on:{click:function(e){return t.clearSelectedCollections()}}},[t._v("Clear")]),t._v(" "),e("button",{staticClass:"btn btn-primary font-weight-bold",attrs:{type:"button"},on:{click:function(e){return t.goBack()}}},[t._v("Save")])])]):"schedulePost"==t.page||"mediaMetadata"==t.page||"addToStory"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[e("p",{staticClass:"text-center lead text-muted mb-0 py-5"},[t._v("This feature is not available yet.")])]):"editMedia"==t.page?e("div",{staticClass:"w-100 h-100 p-3"},[e("div",{staticClass:"media"},[e("img",{staticClass:"mr-3",attrs:{src:t.media[t.carouselCursor].preview_url,width:"50px",height:"50px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold text-muted small"},[t._v("Media Description")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.media[t.carouselCursor].alt,expression:"media[carouselCursor].alt"}],staticClass:"form-control",attrs:{placeholder:"Add a media description here...",maxlength:t.config.uploader.max_altext_length},domProps:{value:t.media[t.carouselCursor].alt},on:{input:function(e){e.target.composing||t.$set(t.media[t.carouselCursor],"alt",e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text small text-muted mb-0 d-flex justify-content-between"},[e("span",[t._v("Describe your photo for people with visual impairments.")]),t._v(" "),e("span",[t._v(t._s(t.media[t.carouselCursor].alt?t.media[t.carouselCursor].alt.length:0)+"/"+t._s(t.config.uploader.max_altext_length))])])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold text-muted small"},[t._v("License")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.licenseId,expression:"licenseId"}],staticClass:"form-control",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.licenseId=e.target.multiple?i:i[0]}}},t._l(t.availableLicenses,function(i,s){return e("option",{domProps:{value:i.id,selected:i.id==t.licenseId}},[t._v("\n                                            "+t._s(i.name)+"\n                                        ")])}),0)])])]),t._v(" "),e("hr"),t._v(" "),e("p",{staticClass:"d-flex justify-content-between mb-0"},[e("button",{staticClass:"btn btn-link text-muted font-weight-bold text-decoration-none",attrs:{type:"button"},on:{click:function(e){return t.goBack()}}},[t._v("Cancel")]),t._v(" "),e("button",{staticClass:"btn btn-primary font-weight-bold",attrs:{type:"button"},on:{click:function(e){return t.goBack()}}},[t._v("Save")])])]):"video-2"==t.page?e("div",{staticClass:"w-100 h-100"},[t.video.title.length?e("div",{staticClass:"border-bottom"},[e("div",{staticClass:"media p-3"},[e("img",{staticClass:"mr-2",attrs:{src:t.media[0].preview_url,width:"100px",height:"70px"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("p",{staticClass:"font-weight-bold mb-1"},[t._v(t._s(t.video.title?t.video.title.slice(0,70):"Untitled"))]),t._v(" "),e("p",{staticClass:"mb-0 text-muted small"},[t._v(t._s(t.video.description?t.video.description.slice(0,90):"No description"))])])])]):t._e(),t._v(" "),e("div",{staticClass:"border-bottom d-flex justify-content-between px-4 mb-0 py-2"},[t._m(16),t._v(" "),e("div",[e("div",{staticClass:"custom-control custom-switch",staticStyle:{"z-index":"9999"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nsfw,expression:"nsfw"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"asnsfw"},domProps:{checked:Array.isArray(t.nsfw)?t._i(t.nsfw,null)>-1:t.nsfw},on:{change:function(e){var i=t.nsfw,s=e.target,a=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.nsfw=i.concat([null])):o>-1&&(t.nsfw=i.slice(0,o).concat(i.slice(o+1)))}else t.nsfw=a}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"asnsfw"}})])])]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2 cursor-pointer",on:{click:function(e){return t.showLicenseCard()}}},[t._v("Add license")])]),t._v(" "),e("div",{staticClass:"border-bottom"},[e("p",{staticClass:"px-4 mb-0 py-2"},[e("span",[t._v("Audience")]),t._v(" "),e("span",{staticClass:"float-right"},[e("a",{staticClass:"btn btn-outline-secondary btn-sm small mr-3 mt-n1 disabled",staticStyle:{"font-size":"10px",padding:"3px","text-transform":"uppercase"},attrs:{href:"#",disabled:""},on:{click:function(e){return e.preventDefault(),t.showVisibilityCard()}}},[t._v(t._s(t.visibilityTag))]),t._v(" "),e("a",{staticClass:"text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showVisibilityCard()}}},[e("i",{staticClass:"fas fa-chevron-right fa-lg text-lighter"})])])])]),t._v(" "),e("div",{staticClass:"p-3"},[e("div",{staticClass:"form-group"},[e("p",{staticClass:"small font-weight-bold text-muted mb-0"},[t._v("Title")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.video.title,expression:"video.title"}],staticClass:"form-control",attrs:{placeholder:"Add a good title"},domProps:{value:t.video.title},on:{input:function(e){e.target.composing||t.$set(t.video,"title",e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text mb-0 small text-muted"},[t._v(t._s(t.video.title.length)+"/70")])]),t._v(" "),e("div",{staticClass:"form-group mb-0"},[e("p",{staticClass:"small font-weight-bold text-muted mb-0"},[t._v("Description")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.video.description,expression:"video.description"}],staticClass:"form-control",attrs:{placeholder:"Add an optional description",maxlength:"5000",rows:"5"},domProps:{value:t.video.description},on:{input:function(e){e.target.composing||t.$set(t.video,"description",e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text mb-0 small text-muted"},[t._v(t._s(t.video.description.length)+"/5000")])])])]):t._e()]),t._v(" "),"cropPhoto"==t.page?e("div",{staticClass:"card-footer bg-white d-flex justify-content-between"},[e("div",[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.rotate}},[e("i",{staticClass:"fas fa-redo"})])]),t._v(" "),e("div",[e("div",{staticClass:"d-inline-block button-group"},[e("button",{class:"btn font-weight-bold "+[t.cropper.aspectRatio==16/9?"btn-primary":"btn-light"],on:{click:function(e){return e.preventDefault(),t.changeAspect(16/9)}}},[t._v("16:9")]),t._v(" "),e("button",{class:"btn font-weight-bold "+[t.cropper.aspectRatio==4/3?"btn-primary":"btn-light"],on:{click:function(e){return e.preventDefault(),t.changeAspect(4/3)}}},[t._v("4:3")]),t._v(" "),e("button",{class:"btn font-weight-bold "+[1.5==t.cropper.aspectRatio?"btn-primary":"btn-light"],on:{click:function(e){return e.preventDefault(),t.changeAspect(1.5)}}},[t._v("3:2")]),t._v(" "),e("button",{class:"btn font-weight-bold "+[1==t.cropper.aspectRatio?"btn-primary":"btn-light"],on:{click:function(e){return e.preventDefault(),t.changeAspect(1)}}},[t._v("1:1")]),t._v(" "),e("button",{class:"btn font-weight-bold "+[t.cropper.aspectRatio==2/3?"btn-primary":"btn-light"],on:{click:function(e){return e.preventDefault(),t.changeAspect(2/3)}}},[t._v("2:3")])])])]):t._e()])])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header d-inline-flex align-items-center justify-content-between bg-white"},[e("span",{staticClass:"pr-3"},[e("i",{staticClass:"fas fa-cog fa-lg text-muted"})]),t._v(" "),e("span",{staticClass:"font-weight-bold"},[t._v("\n                        Camera Roll\n                    ")]),t._v(" "),e("span",{staticClass:"text-primary font-weight-bold"},[t._v("Upload")])])},function(){var t=this._self._c;return t("span",{staticClass:"pr-3"},[t("i",{staticClass:"fas fa-info-circle fa-lg text-primary"})])},function(){var t=this._self._c;return t("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[this._v("Loading...")])])},function(){var t=this._self._c;return t("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[this._v("Loading...")])])},function(){var t=this._self._c;return t("div",{staticClass:"mr-3 align-items-center justify-content-center",staticStyle:{display:"inline-flex",width:"40px",height:"40px","border-radius":"100%","background-color":"#008DF5"}},[t("i",{staticClass:"fal fa-bolt text-white fa-lg"})])},function(){var t=this._self._c;return t("p",{staticClass:"mb-0"},[t("span",{staticClass:"h5 mt-0 font-weight-bold text-primary"},[this._v("New Post")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"media"},[e("div",{staticClass:"mr-3 align-items-center justify-content-center",staticStyle:{display:"inline-flex",width:"40px",height:"40px","border-radius":"100%",border:"2px solid #008DF5"}},[e("i",{staticClass:"far fa-edit text-primary fa-lg"})]),t._v(" "),e("div",{staticClass:"media-body text-left"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"h5 mt-0 font-weight-bold text-primary"},[t._v("New Text Post")]),t._v(" "),e("sup",{staticClass:"float-right mt-2"},[e("span",{staticClass:"btn btn-outline-lighter p-1 btn-sm font-weight-bold py-0",staticStyle:{"font-size":"10px","line-height":"0.6"}},[t._v("BETA")])])]),t._v(" "),e("p",{staticClass:"mb-0 text-muted"},[t._v("Share a text only post")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-body py-2"},[e("div",{staticClass:"media"},[e("div",{staticClass:"mr-3 align-items-center justify-content-center",staticStyle:{display:"inline-flex",width:"40px",height:"40px","border-radius":"100%",border:"1px solid #008DF5"}},[e("i",{staticClass:"fas fa-history text-primary fa-lg"})]),t._v(" "),e("div",{staticClass:"media-body text-left"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"h5 mt-0 font-weight-bold text-primary"},[t._v("New Story")]),t._v(" "),e("sup",{staticClass:"float-right mt-2"},[e("span",{staticClass:"btn btn-outline-lighter p-1 btn-sm font-weight-bold py-0",staticStyle:{"font-size":"10px","line-height":"0.6"}},[t._v("BETA")])])]),t._v(" "),e("p",{staticClass:"mb-0 text-muted"},[t._v("Add to your story")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-body py-2"},[e("div",{staticClass:"media"},[e("div",{staticClass:"mr-3 align-items-center justify-content-center",staticStyle:{display:"inline-flex",width:"40px",height:"40px","border-radius":"100%",border:"2px solid #008DF5"}},[e("i",{staticClass:"fas fa-poll-h text-primary fa-lg"})]),t._v(" "),e("div",{staticClass:"media-body text-left"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"h5 mt-0 font-weight-bold text-primary"},[t._v("New Poll")]),t._v(" "),e("sup",{staticClass:"float-right mt-2"},[e("span",{staticClass:"btn btn-outline-lighter p-1 btn-sm font-weight-bold py-0",staticStyle:{"font-size":"10px","line-height":"0.6"}},[t._v("BETA")])])]),t._v(" "),e("p",{staticClass:"mb-0 text-muted"},[t._v("Create a poll")])])])])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"card my-md-3 shadow-none border compose-action text-decoration-none text-dark",attrs:{href:"/i/collections/create"}},[e("div",{staticClass:"card-body py-2"},[e("div",{staticClass:"media"},[e("div",{staticClass:"mr-3 align-items-center justify-content-center",staticStyle:{display:"inline-flex",width:"40px",height:"40px","border-radius":"100%",border:"1px solid #008DF5"}},[e("i",{staticClass:"fal fa-images text-primary fa-lg"})]),t._v(" "),e("div",{staticClass:"media-body text-left"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"h5 mt-0 font-weight-bold text-primary"},[t._v("New Collection")]),t._v(" "),e("sup",{staticClass:"float-right mt-2"},[e("span",{staticClass:"btn btn-outline-lighter p-1 btn-sm font-weight-bold py-0",staticStyle:{"font-size":"10px","line-height":"0.6"}},[t._v("BETA")])])]),t._v(" "),e("p",{staticClass:"mb-0 text-muted"},[t._v("New collection of posts")])])])])])},function(){var t=this._self._c;return t("p",{staticClass:"py-3"},[t("a",{staticClass:"font-weight-bold",attrs:{href:"/site/help"}},[this._v("Help")])])},function(){var t=this._self._c;return t("div",[t("div",{staticClass:"text-dark"},[this._v("Sensitive/NSFW Media")])])},function(){var t=this,e=t._self._c;return e("span",[t._v("Add to Collection "),e("span",{staticClass:"ml-2 badge badge-primary"},[t._v("NEW")])])},function(){var t=this._self._c;return t("span",{staticClass:"text-decoration-none"},[t("i",{staticClass:"fas fa-chevron-right fa-lg text-lighter"})])},function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-dark"},[t._v("Turn off commenting")]),t._v(" "),e("p",{staticClass:"text-muted small mb-0"},[t._v("Disables comments for this post, you can change this later.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",[e("div",{staticClass:"text-dark"},[t._v("Media Descriptions")]),t._v(" "),e("p",{staticClass:"text-muted small mb-0"},[t._v("Describe your photos for people with visual impairments.")])]),t._v(" "),e("div",[e("i",{staticClass:"fas fa-chevron-right fa-lg text-lighter"})])])},function(){var t=this._self._c;return t("div",[t("div",{staticClass:"text-dark"},[this._v("Contains NSFW Media")])])}]},19324:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});var s=i(7114),a=i(50427),o={};for(const t in a)"default"!==t&&(o[t]=()=>a[t]);i.d(e,o);i(30023);const n=(0,i(14486).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports},28320:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>C});var s=i(91584),a=(i(49551),i(2e4)),o=(i(73718),i(79288)),n=i(4717),r=i(67794),l=i(74692);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach(function(e){m(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function m(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=c(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,a,o,n,r=[],l=!0,c=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(s=o.call(i)).done)&&(r.push(s.value),r.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(n=i.return(),Object(n)!==n))return}finally{if(c)throw a}}return r}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return v(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function g(){var t,e,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function o(i,s,a,o){var l=s&&s.prototype instanceof r?s:r,c=Object.create(l.prototype);return b(c,"_invoke",function(i,s,a){var o,r,l,c=0,d=a||[],p=!1,u={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,i){return o=e,r=0,l=t,u.n=i,n}};function m(i,s){for(r=i,l=s,e=0;!p&&c&&!a&&e<d.length;e++){var a,o=d[e],m=u.p,h=o[2];i>3?(a=h===s)&&(l=o[(r=o[4])?5:(r=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=i<2&&m<o[1])?(r=0,u.v=s,u.n=o[1]):m<h&&(a=i<3||o[0]>s||s>h)&&(o[4]=i,o[5]=s,u.n=h,r=0))}if(a||i>1)return n;throw p=!0,s}return function(a,d,h){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&m(d,h),r=d,l=h;(e=r<2?t:l)||!p;){o||(r?r<3?(r>1&&(u.n=-1),m(r,l)):u.n=l:u.v=l);try{if(c=2,o){if(r||(a="next"),e=o[a]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,r<2&&(r=0)}else 1===r&&(e=o.return)&&e.call(o),r<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),r=1);o=t}else if((e=(p=u.n<0)?l:i.call(s,u))!==n)break}catch(e){o=t,r=1,l=e}finally{c=1}}return{value:e,done:p}}}(i,a,o),!0),c}var n={};function r(){}function l(){}function c(){}e=Object.getPrototypeOf;var d=[][s]?e(e([][s]())):(b(e={},s,function(){return this}),e),p=c.prototype=r.prototype=Object.create(d);function u(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,b(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=c,b(p,"constructor",c),b(c,"constructor",l),l.displayName="GeneratorFunction",b(c,a,"GeneratorFunction"),b(p),b(p,a,"Generator"),b(p,s,function(){return this}),b(p,"toString",function(){return"[object Generator]"}),(g=function(){return{w:o,m:u}})()}function b(t,e,i,s){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}b=function(t,e,i,s){function o(e,i){b(t,e,function(t){return this._invoke(e,i,t)})}e?a?a(t,e,{value:i,enumerable:!s,configurable:!s,writable:!s}):t[e]=i:(o("next",0),o("throw",1),o("return",2))},b(t,e,i,s)}function y(t,e,i,s,a,o,n){try{var r=t[o](n),l=r.value}catch(t){return void i(t)}r.done?e(l):Promise.resolve(l).then(s,a)}function _(t){return function(){var e=this,i=arguments;return new Promise(function(s,a){var o=t.apply(e,i);function n(t){y(o,s,a,n,r,"next",t)}function r(t){y(o,s,a,n,r,"throw",t)}n(void 0)})}}const C={components:{VueCropper:s.default,Autocomplete:a.default,VueTribute:o.default,MediaEditorPreview:n.MediaEditorPreview,MediaEditorFilterMenu:n.MediaEditorFilterMenu},data:function(){return{config:window.App.config,pageLoading:!1,profile:window._sharedData.curUser,composeText:"",composeTextLength:0,nsfw:!1,ids:[],media:[],files:[],carouselCursor:0,uploading:!1,uploadProgress:100,mode:"photo",modes:["photo","video","plain"],page:1,composeState:"publish",visibility:"public",visibilityTag:"Public",place:!1,commentsDisabled:!1,optimizeMedia:!0,mediaCropped:!1,pageTitle:"",cropper:{aspectRatio:1,viewMode:1,zoomable:!0,zoom:0},namedPages:["cropPhoto","tagPeople","addLocation","advancedSettings","visibility","altText","addToCollection","schedulePost","mediaMetadata","addToStory","editMedia","cameraRoll","tagPeopleHelp","textOptions","licensePicker"],cameraRollMedia:[],taggedUsernames:[],taggedPeopleSearch:null,textMode:!1,tributeSettings:{noMatchTemplate:function(){return null},collection:[{trigger:"@",menuShowMinLength:2,values:function(t,e){axios.get("/api/compose/v0/search/mention",{params:{q:t}}).then(function(t){e(t.data)}).catch(function(t){})}},{trigger:"#",menuShowMinLength:2,values:function(t,e){axios.get("/api/compose/v0/search/hashtag",{params:{q:t}}).then(function(t){e(t.data)}).catch(function(t){})}}]},availableLicenses:[{id:1,name:"All Rights Reserved",title:""},{id:5,name:"Public Domain Work",title:""},{id:6,name:"Public Domain Dedication (CC0)",title:"CC0"},{id:11,name:"Attribution",title:"CC BY"},{id:12,name:"Attribution-ShareAlike",title:"CC BY-SA"},{id:13,name:"Attribution-NonCommercial",title:"CC BY-NC"},{id:14,name:"Attribution-NonCommercial-ShareAlike",title:"CC BY-NC-SA"},{id:15,name:"Attribution-NoDerivs",title:"CC BY-ND"},{id:16,name:"Attribution-NonCommercial-NoDerivs",title:"CC BY-NC-ND"}],licenseIndex:0,video:{title:"",description:""},composeSettings:{default_license:null,media_descriptions:!1},licenseId:1,licenseTitle:null,maxAltTextLength:140,pollOptionModel:null,pollOptions:[],pollExpiry:1440,postingPoll:!1,collections:[],collectionsSelected:[],collectionsLoaded:!1,collectionsPage:1,collectionsCanLoadMore:!1,spoilerText:void 0,isPosting:!1}},created:function(){var t=this;try{this.editor=new n.MediaEditor({effects:r.filterEffects,onEdit:function(e,i){var s=i.effect,a=i.intensity,o=i.crop;if(!(e>=t.files.length)){var n=t.files[e];t.$set(n,"editState",{effect:s,intensity:a,crop:o})}},onRenderPreview:function(e,i){if(!(e>=t.files.length)){var s=t.files[e].editState,a=t.media[e];s&&(s.crop||-1!==s.effect)?a.preview_url=i:a.preview_url=a.url}}})}catch(t){}},computed:{spoilerTextLength:function(){return this.spoilerText?this.spoilerText.length:0}},beforeMount:function(){var t=this;axios.get("/api/compose/v0/settings").then(function(e){t.composeSettings=e.data,t.licenseId=t.composeSettings.default_license,t.maxAltTextLength=e.data.max_altext_length,t.licenseId>10&&(t.licenseTitle=t.availableLicenses.filter(function(e){return e.id==t.licenseId}).map(function(t){return t.title})[0]),t.fetchProfile()})},destroyed:function(){this.media.forEach(function(t){URL.revokeObjectURL(t.url),URL.revokeObjectURL(t.preview_url)}),this.files.length=this.media.length=0,this.editor=void 0},methods:{timeAgo:function(t){return App.util.format.timeAgo(t)},formatBytes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+t)return"0 Bytes";var i=e<0?0:e,s=Math.floor(Math.log(t)/Math.log(1024));return"".concat(parseFloat((t/Math.pow(1024,s)).toFixed(i))," ").concat(["Bytes","KB","MB","GB","TB"][s])},defineErrorMessage:function(t){var e;return e=t.response?t.response.data.message?t.response.data.message:"An unexpected error occured.":t.message,swal("Oops, something went wrong!",e,"error")},fetchProfile:function(){var t=this,e={public:"Public",private:"Followers Only",unlisted:"Unlisted"};if(window._sharedData.curUser.id){if(this.profile=window._sharedData.curUser,this.composeSettings&&this.composeSettings.hasOwnProperty("default_scope")&&this.composeSettings.default_scope){var i=this.composeSettings.default_scope;this.visibility=i,this.visibilityTag=e[i]}1==this.profile.locked&&(this.visibility="private",this.visibilityTag="Followers Only")}else axios.get("/api/pixelfed/v1/accounts/verify_credentials").then(function(i){if(window._sharedData.currentUser=i.data,t.profile=i.data,t.composeSettings&&t.composeSettings.hasOwnProperty("default_scope")&&t.composeSettings.default_scope){var s=t.composeSettings.default_scope;t.visibility=s,t.visibilityTag=e[s]}1==t.profile.locked&&(t.visibility="private",t.visibilityTag="Followers Only")}).catch(function(t){})},addMedia:function(t){var e=l(t.target);e.attr("disabled",""),l('.file-input[name="media"]').trigger("click"),e.blur(),e.removeAttr("disabled")},addText:function(t){this.pageTitle="New Text Post",this.page="addText",this.textMode=!0,this.mode="text"},onInputFile:function(t){var e=this,i=t.target,s=Array.from(i.files);i.value=null;var a=this;s.forEach(function(t,i){if(a.media&&a.media.length>=a.config.uploader.album_limit)return swal("Error","You can only upload "+a.config.uploader.album_limit+" photos per album","error"),void(a.page=2);var s=a.config.uploader.media_types.split(",");if(-1==l.inArray(t.type,s))return swal("Invalid File Type","The file you are trying to add is not a valid mime type. Please upload a "+a.config.uploader.media_types+" only.","error"),void(a.page=2);var o=t.type.replace(/\/.*/,""),n=URL.createObjectURL(t),r="image"===o?URL.createObjectURL(t):"/storage/no-preview.png";e.files.push({file:t,editState:void 0}),e.media.push({url:n,preview_url:r,type:o})}),this.media.length?this.page=3:this.page=2},mediaUpload:function(){var t=this;return _(g().m(function e(){var i;return g().w(function(e){for(;;)switch(e.n){case 0:return t.uploading=!0,i=t.files.map(function(){var e=_(g().m(function e(i,s){var a,o,n,r,l,c,d;return g().w(function(e){for(;;)switch(e.n){case 0:if(a=i.file,"image"!==(o=t.media[s]).type||!i.editState){e.n=3;break}if(n=i.editState,r=i.cropperBlob,!t.editor||-1===n.effect&&!n.crop){e.n=2;break}return e.n=1,t.editor.toBlob(s);case 1:a=e.v,e.n=3;break;case 2:r&&(a=r);case 3:return(l=new FormData).append("file",a),c={onUploadProgress:function(t){var e=Math.round(100*t.loaded/t.total);d.uploadProgress=e}},d=t,e.n=4,axios.post("/api/compose/v0/media/upload",l,c).then(function(t){d.uploadProgress=100,d.ids.push(t.data.id),Object.assign(o,t.data),setTimeout(function(){d.page=3},300)}).catch(function(t){switch(t.response.status){case 403:swal("Account size limit reached","Contact your admin for assistance.","error"),d.page=2;break;case 413:swal("File is too large","The file you uploaded has the size of "+d.formatBytes(a.size)+". Unfortunately, only images up to "+d.formatBytes(1024*d.config.uploader.max_photo_size)+" are supported.\nPlease resize the file and try again.","error"),d.page=2;break;case 451:swal("Banned Content","This content has been banned and cannot be uploaded.","error"),d.page=2;break;case 429:swal("Limit Reached","You can upload up to 250 photos or videos per day and you've reached that limit. Please try again later.","error"),d.page=2;break;case 500:swal("Error",t.response.data.message,"error"),d.page=2;break;default:swal("Oops, something went wrong!","An unexpected error occurred.","error"),d.page=2}throw t});case 4:return e.a(2)}},e)}));return function(t,i){return e.apply(this,arguments)}}()),e.n=1,Promise.all(i).finally(function(){t.uploadProgress=0,t.uploading=!1});case 1:return e.a(2)}},e)}))()},deleteMedia:function(){var t=this;return _(g().m(function e(){var i,s;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!=window.confirm("Are you sure you want to delete this media?")){e.n=1;break}return e.a(2);case 1:if(!(s=t.media[t.carouselCursor].id)){e.n=5;break}return e.p=2,e.n=3,axios.delete("/api/compose/v0/media/delete",{params:{id:s}});case 3:e.n=5;break;case 4:return e.p=4,e.v,swal("Whoops!","An error occured when attempting to delete this, please try again","error"),e.a(2);case 5:t.ids.splice(t.carouselCursor,1),t.media.splice(t.carouselCursor,1),URL.revokeObjectURL(null===(i=t.files[t.carouselCursor])||void 0===i?void 0:i.url),t.files.splice(t.carouselCursor,1),0==t.media.length?(t.ids=[],t.media=[],t.carouselCursor=0):t.carouselCursor=0;case 6:return e.a(2)}},e,null,[[2,4]])}))()},mediaReorder:function(t){var e=this.carouselCursor,i=e+("prev"===t?-1:1);if(!(i<0||i>=this.media.length)){var s=h(this.files.splice(e,1),1)[0],a=h(this.media.splice(e,1),1)[0],o=h(this.ids.splice(e,1),1)[0];this.files.splice(i,0,s),this.media.splice(i,0,a),this.ids.splice(i,0,o),this.carouselCursor=i}},compose:function(){var t=this;return _(g().m(function e(){var i,s,a;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=t.composeState,0!=t.files.length){e.n=1;break}return e.a(2);case 1:if(!(t.composeText.length>t.config.uploader.max_caption_length)){e.n=2;break}return swal("Error","Caption is too long","error"),e.a(2);case 2:a=i,e.n="publish"===a?3:"delete"===a?10:11;break;case 3:return t.isPosting=!0,e.p=4,e.n=5,t.mediaUpload().finally(function(){return t.isPosting=!1});case 5:e.n=7;break;case 6:return e.p=6,e.v,t.isPosting=!1,e.a(2);case 7:if(!0!==t.composeSettings.media_descriptions){e.n=8;break}if(!t.media.filter(function(t){return!t.hasOwnProperty("alt")||t.alt.length<2}).length){e.n=8;break}return swal("Missing media descriptions","You have enabled mandatory media descriptions. Please add media descriptions under Advanced settings to proceed. For more information, please see the media settings page.","warning"),t.isPosting=!1,e.a(2);case 8:if(0!=t.media.length){e.n=9;break}return swal("Whoops!","You need to add media before you can save this!","warning"),e.a(2);case 9:return"Add optional caption..."==t.composeText&&(t.composeText=""),s={media:t.media,caption:t.composeText,visibility:t.visibility,cw:t.nsfw,comments_disabled:t.commentsDisabled,place:t.place,tagged:t.taggedUsernames,optimize_media:t.optimizeMedia,license:t.licenseId,video:t.video,spoiler_text:t.spoilerText},t.collectionsSelected.length&&(s.collections=t.collectionsSelected.map(function(e){return t.collections[e].id})),axios.post("/api/compose/v0/publish",s).then(function(t){"/i/web/compose"===location.pathname&&t.data&&t.data.length?location.href="/i/web/post/"+t.data.split("/").slice(-1)[0]:location.href=t.data}).catch(function(e){if(400===e.response.status)"Must contain a single photo or video or multiple photos."==e.response.data.error?swal("Wrong types of mixed media","The album must contain a single photo or video or multiple photos.","error"):t.defineErrorMessage(e);else t.defineErrorMessage(e)}).finally(function(){t.isPosting=!1}),e.a(2);case 10:return t.ids=[],t.media=[],t.carouselCursor=0,t.composeText="",t.composeTextLength=0,l("#composeModal").modal("hide"),e.a(2);case 11:return e.a(2)}},e,null,[[4,6]])}))()},composeTextPost:function(){var t=this.composeState;if(this.composeText.length>this.config.uploader.max_caption_length)swal("Error","Caption is too long","error");else switch(t){case"publish":var e={caption:this.composeText,visibility:this.visibility,cw:this.nsfw,comments_disabled:this.commentsDisabled,place:this.place,tagged:this.taggedUsernames};return void axios.post("/api/compose/v0/publish/text",e).then(function(t){var e=t.data;window.location.href=e}).catch(function(t){var e=t.response.data.message?t.response.data.message:"An unexpected error occured.";swal("Oops, something went wrong!",e,"error")});case"delete":return this.ids=[],this.media=[],this.carouselCursor=0,this.composeText="",this.composeTextLength=0,void l("#composeModal").modal("hide")}},closeModal:function(){l("#composeModal").modal("hide"),this.$emit("close")},goBack:function(){switch(this.pageTitle="",this.mode){case"photo":switch(this.page){case"addText":case"video-2":this.page=1;break;case"textOptions":this.page="addText";break;case"cropPhoto":case"editMedia":this.page=2;break;case"tagPeopleHelp":this.showTagCard();break;case"licensePicker":this.page=3;break;default:-1!=this.namedPages.indexOf(this.page)?this.page=3:this.page--}break;case"video":this.page,this.page="video-2";break;default:switch(this.page){case"addText":case"video-2":this.page=1;break;case"textOptions":this.page="addText";break;case"cropPhoto":case"editMedia":this.page=2;break;case"tagPeopleHelp":this.showTagCard();break;case"licensePicker":this.page=3;break;default:-1!=this.namedPages.indexOf(this.page)?this.page="text"==this.mode?"addText":3:"text"==this.mode||this.page--}}},nextPage:function(){var t=this;switch(this.pageTitle="",this.page){case 1:this.page=2;break;case"cropPhoto":var e=this.files[this.carouselCursor],i=this.$refs.cropper,s=u(u({},e.editState),{},{crop:i.getData()});this.editor?this.editor.setEditState(this.carouselCursor,s):i.getCroppedCanvas().toBlob(function(i){var s=t.media[t.carouselCursor].media;e.croppedBlob=i,URL.revokeObjectURL(s.preview_url),s.preview_url=URL.createObjectURL(i)}),this.page=2;break;case 2:case 3:this.page++}},rotate:function(){this.$refs.cropper.rotate(90)},changeAspect:function(t){this.cropper.aspectRatio=t,this.$refs.cropper.setAspectRatio(t)},showTagCard:function(){this.pageTitle="Tag People",this.page="tagPeople"},showTagHelpCard:function(){this.pageTitle="About Tag People",this.page="tagPeopleHelp"},showLocationCard:function(){this.pageTitle="Add Location",this.page="addLocation"},showAdvancedSettingsCard:function(){this.pageTitle="Advanced Settings",this.page="advancedSettings"},locationSearch:function(t){if(t.length<1)return[];return axios.get("/api/compose/v0/search/location",{params:{q:t}}).then(function(t){return t.data})},getResultValue:function(t){return t.name+", "+t.country},onSubmitLocation:function(t){switch(this.place=t,this.mode){case"photo":this.pageTitle="",this.page=3;break;case"video":this.pageTitle="Edit Video Details",this.page="video-2";break;case"text":this.pageTitle="New Text Post",this.page="addText"}},showVisibilityCard:function(){this.pageTitle="Post Visibility",this.page="visibility"},showAddToStoryCard:function(){this.pageTitle="Add to Story",this.page="addToStory"},showCropPhotoCard:function(){this.pageTitle="Edit Photo",this.page="cropPhoto"},toggleVisibility:function(t){switch(this.visibility=t,this.visibilityTag={public:"Public",private:"Followers Only",unlisted:"Unlisted"}[t],this.mode){case"photo":this.pageTitle="",this.page=3;break;case"video":this.pageTitle="Edit Video Details",this.page="video-2";break;case"text":this.pageTitle="New Text Post",this.page="addText"}},showMediaDescriptionsCard:function(){this.pageTitle="Media Descriptions",this.page="altText"},showAddToCollectionsCard:function(){this.pageTitle="Add to Collection",this.page="addToCollection"},showSchedulePostCard:function(){this.pageTitle="Schedule Post",this.page="schedulePost"},showEditMediaCard:function(){this.pageTitle="Edit Media",this.page="editMedia"},fetchCameraRollDrafts:function(){var t=this;axios.get("/api/pixelfed/local/drafts").then(function(e){t.cameraRollMedia=e.data})},tagSearch:function(t){if(t.length<1)return[];var e=this;return axios.get("/api/compose/v0/search/tag",{params:{q:t}}).then(function(t){if(t.data.length)return t.data.filter(function(t){return 0==e.taggedUsernames.filter(function(e){return e.id==t.id}).length})})},getTagResultValue:function(t){return t.name},onTagSubmitLocation:function(t){this.taggedUsernames.filter(function(e){return e.id==t.id}).length||(this.taggedUsernames.push(t),this.$refs.autocomplete.value="")},untagUsername:function(t){this.taggedUsernames.splice(t,1)},showTextOptions:function(){this.page="textOptions",this.pageTitle="Text Post Options"},showLicenseCard:function(){this.pageTitle="Select a License",this.page="licensePicker"},toggleLicense:function(t){var e=this;switch(this.licenseId=t.id,this.licenseId>10?this.licenseTitle=this.availableLicenses.filter(function(t){return t.id==e.licenseId}).map(function(t){return t.title})[0]:this.licenseTitle=null,this.mode){case"photo":this.pageTitle="",this.page=3;break;case"video":this.pageTitle="Edit Video Details",this.page="video-2";break;case"text":this.pageTitle="New Text Post",this.page="addText"}},newPoll:function(){this.page="poll"},savePollOption:function(){-1==this.pollOptions.indexOf(this.pollOptionModel)?(this.pollOptions.push(this.pollOptionModel),this.pollOptionModel=null):this.pollOptionModel=null},deletePollOption:function(t){this.pollOptions.splice(t,1)},postNewPoll:function(){var t=this;this.postingPoll=!0,axios.post("/api/compose/v0/poll",{caption:this.composeText,cw:!1,visibility:this.visibility,comments_disabled:!1,expiry:this.pollExpiry,pollOptions:this.pollOptions}).then(function(e){if(!e.data.hasOwnProperty("url"))return swal("Oops!","An error occured while attempting to create this poll. Please refresh the page and try again.","error"),void(t.postingPoll=!1);window.location.href=e.data.url}).catch(function(e){if(e.response.data.hasOwnProperty("error")&&"Duplicate detected."==e.response.data.error)return t.postingPoll=!1,void swal("Oops!","The poll you are trying to create is similar to an existing poll you created. Please make the poll question (caption) unique.","error");t.postingPoll=!1,swal("Oops!","An error occured while attempting to create this poll. Please refresh the page and try again.","error")})},filesize:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return filesize(1024*t,{round:0})}),showCollectionCard:function(){this.pageTitle="Add to Collection(s)",this.page="addToCollection",this.collectionsLoaded||this.fetchCollections()},fetchCollections:function(){var t=this;axios.get("/api/local/profile/collections/".concat(this.profile.id)).then(function(e){t.collections=e.data,t.collectionsLoaded=!0,t.collectionsCanLoadMore=9==e.data.length,t.collectionsPage++})},toggleCollectionItem:function(t){if(this.collectionsSelected.includes(t))this.collectionsSelected=this.collectionsSelected.filter(function(e){return e!=t});else{if(7==this.collectionsSelected.length)return void swal("Oops!","You can only share to 5 collections.","info");this.collectionsSelected.push(t)}},clearSelectedCollections:function(){this.collectionsSelected=[],this.pageTitle="Compose",this.page=3},loadMoreCollections:function(){var t=this;this.collectionsCanLoadMore=!1,axios.get("/api/local/profile/collections/".concat(this.profile.id),{params:{page:this.collectionsPage}}).then(function(e){var i,s=t.collections.map(function(t){return t.id}),a=e.data.filter(function(t){return!s.includes(t.id)});a&&a.length&&((i=t.collections).push.apply(i,d(a)),t.collectionsPage++,t.collectionsCanLoadMore=!0)})}},watch:{files:function(t){this.editor.setSources(t.map(function(t){return t.file}))}}}},30023:(t,e,i)=>{"use strict";i.r(e);var s=i(94586),a={};for(const t in s)"default"!==t&&(a[t]=()=>s[t]);i.d(e,a)},42615:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var s=i(76798),a=i.n(s)()(function(t){return t[1]});a.push([t.id,".compose-modal-component .media-drawer-filters{flex-wrap:unset;overflow-x:auto}.compose-modal-component .media-drawer-filters .nav-link{min-width:100px;padding-bottom:1rem;padding-top:1rem}.compose-modal-component .media-drawer-filters .active{color:#fff;font-weight:700}@media (hover:none) and (pointer:coarse){.compose-modal-component .media-drawer-filters::-webkit-scrollbar{display:none}}.compose-modal-component .no-focus{border-color:none;box-shadow:none;outline:0}.compose-modal-component a.list-group-item{text-decoration:none}.compose-modal-component a.list-group-item:hover{background-color:#f8f9fa;text-decoration:none}.compose-modal-component .compose-action:hover{background-color:#f8f9fa;cursor:pointer}.compose-modal-component .collections-list-group{max-height:500px;overflow-y:auto}.compose-modal-component .collections-list-group .list-group-item.active{background-color:#dbeafe!important;border-color:#60a5fa!important;color:#212529}.compose-modal-component .media-editor{--height-menu-row:5rem;--gap-preview:0rem;--height-menu-row-scroll:10rem;--color-bg-button:transparent;--color-bg-preview:transparent;--color-bg-button-hover:var(--light-gray);--color-bg-acc:var(--card-bg);--color-fnt-default:var(--body-color);--color-fnt-acc:var(--text-lighter);--color-scrollbar-thumb:var(--light-gray);--color-scrollbar-both:var(--light-gray) transparent;--color-slider-thumb:var(--text-lighter);--color-slider-progress:var(--light-gray);--color-slider-track:var(--light);--color-crop-outline:var(--light-gray);--color-crop-dashed:#ffffffde;--color-crop-overlay:#00000082;background-color:transparent;border:none!important;box-shadow:none!important;font-size:12px}",""]);const o=a},43532:(t,e,i)=>{Vue.component("compose-modal",i(19324).default)},50427:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var s=i(28320),a={};for(const t in s)"default"!==t&&(a[t]=()=>s[t]);i.d(e,a);const o=s.default},67794:(t,e,i)=>{"use strict";i.r(e),i.d(e,{filterEffects:()=>s});var s=[{name:"1984",ops:[{type:"sepia",intensity:.5},{type:"hue_rotate",angle:-30},{type:"adjust_color",brightness:0,contrast:0,saturation:.4}]},{name:"Azen",ops:[{type:"sepia",intensity:.2},{type:"adjust_color",brightness:.15,contrast:0,saturation:.4}]},{name:"Astairo",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:.2,contrast:.1,saturation:.3}]},{name:"Grasbee",ops:[{type:"sepia",intensity:.5},{type:"adjust_color",brightness:0,contrast:.2,saturation:.8}]},{name:"Bookrun",ops:[{type:"sepia",intensity:.4},{type:"adjust_color",brightness:.1,contrast:.25,saturation:-.1},{type:"hue_rotate",angle:-2}]},{name:"Borough",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.25,contrast:.25,saturation:0},{type:"hue_rotate",angle:5}]},{name:"Farms",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.25,contrast:.25,saturation:.35},{type:"hue_rotate",angle:-5}]},{name:"Hairsadone",ops:[{type:"sepia",intensity:.15},{type:"adjust_color",brightness:.25,contrast:.25,saturation:0},{type:"hue_rotate",angle:5}]},{name:"Cleana",ops:[{type:"sepia",intensity:.5},{type:"adjust_color",brightness:.25,contrast:.15,saturation:-.1},{type:"hue_rotate",angle:-2}]},{name:"Catpatch",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:0,contrast:.5,saturation:.1}]},{name:"Earlyworm",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.25,contrast:.15,saturation:-.1},{type:"hue_rotate",angle:-5}]},{name:"Plaid",ops:[{type:"adjust_color",brightness:.1,contrast:.1,saturation:0}]},{name:"Kyo",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.2,contrast:.15,saturation:.35},{type:"hue_rotate",angle:-5}]},{name:"Yefe",ops:[{type:"sepia",intensity:.4},{type:"adjust_color",brightness:.2,contrast:.5,saturation:.4},{type:"hue_rotate",angle:-10}]},{name:"Godess",ops:[{type:"sepia",intensity:.5},{type:"adjust_color",brightness:.05,contrast:.05,saturation:.35}]},{name:"Yards",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.2,contrast:.2,saturation:.05},{type:"hue_rotate",angle:-15}]},{name:"Quill",ops:[{type:"adjust_color",brightness:.25,contrast:-.15,saturation:-1}]},{name:"Juno",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:.15,contrast:.15,saturation:.8}]},{name:"Rankine",ops:[{type:"sepia",intensity:.15},{type:"adjust_color",brightness:.1,contrast:.5,saturation:0},{type:"hue_rotate",angle:-10}]},{name:"Mark",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.3,contrast:.2,saturation:.25}]},{name:"Chill",ops:[{type:"adjust_color",brightness:0,contrast:.5,saturation:.1}]},{name:"Van",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.05,contrast:.05,saturation:1}]},{name:"Apache",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:.05,contrast:.05,saturation:.75}]},{name:"May",ops:[{type:"adjust_color",brightness:.15,contrast:.1,saturation:.1}]},{name:"Ceres",ops:[{type:"adjust_color",brightness:.4,contrast:-.05,saturation:-1},{type:"sepia",intensity:.35}]},{name:"Knoxville",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:-.1,contrast:.5,saturation:0},{type:"hue_rotate",angle:-15}]},{name:"Felicity",ops:[{type:"adjust_color",brightness:.25,contrast:.1,saturation:.1}]},{name:"Sandblast",ops:[{type:"sepia",intensity:.15},{type:"adjust_color",brightness:.2,contrast:0,saturation:0}]},{name:"Daisy",ops:[{type:"sepia",intensity:.75},{type:"adjust_color",brightness:.25,contrast:-.25,saturation:.4}]},{name:"Elevate",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.2,contrast:.25,saturation:-.1}]},{name:"Nevada",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:-.1,contrast:.5,saturation:0},{type:"hue_rotate",angle:-15}]},{name:"Futura",ops:[{type:"sepia",intensity:.15},{type:"adjust_color",brightness:.25,contrast:.25,saturation:.2}]},{name:"Sleepy",ops:[{type:"sepia",intensity:.15},{type:"adjust_color",brightness:.25,contrast:.25,saturation:.2}]},{name:"Steward",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:.25,contrast:.1,saturation:.25}]},{name:"Savoy",ops:[{type:"sepia",intensity:.4},{type:"adjust_color",brightness:.2,contrast:-.1,saturation:.4},{type:"hue_rotate",angle:-10}]},{name:"Blaze",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:-.05,contrast:.5,saturation:0},{type:"hue_rotate",angle:-15}]},{name:"Apricot",ops:[{type:"sepia",intensity:.25},{type:"adjust_color",brightness:.1,contrast:.1,saturation:0}]},{name:"Gloming",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:.15,contrast:.2,saturation:.3}]},{name:"Walter",ops:[{type:"sepia",intensity:.35},{type:"adjust_color",brightness:.25,contrast:-.2,saturation:.4}]},{name:"Poplar",ops:[{type:"adjust_color",brightness:.2,contrast:-.15,saturation:-.95},{type:"sepia",intensity:.5}]},{name:"Xenon",ops:[{type:"sepia",intensity:.45},{type:"adjust_color",brightness:.75,contrast:.25,saturation:.3},{type:"hue_rotate",angle:-5}]}]},94586:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});var s=i(85072),a=i.n(s),o=i(42615),n={insert:"head",singleton:!1};a()(o.default,n);const r=o.default.locals||{}}},t=>{t.O(0,[3660],()=>{return e=43532,t(t.s=e);var e});t.O()}]);